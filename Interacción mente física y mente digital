{"cells":[{"cell_type":"markdown","metadata":{"id":"47kV9o1Ni8GH"},"source":["# **Colab Pro notebook from https://github.com/TheLastBen/fast-stable-diffusion** *Alternatives : [RunPod](https://www.runpod.io/console/gpu-browse?template=runpod-stable-unified)  | [Paperspace](https://console.paperspace.com/github/TheLastBen/PPS?machine=Free-GPU)*\n","##**[Support](https://ko-fi.com/thelastben)**"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"Y9EBc437WDOs","colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["6ecfcc5b39384fe4981cf02260c31905","41ab5615cc134f849d5dc8b42f582826","a501008153354d5fa28807d7efba3433"]},"executionInfo":{"status":"ok","timestamp":1688751281347,"user_tz":240,"elapsed":21655,"user":{"displayName":"Alejandro Vegas","userId":"05883108913568974019"}},"outputId":"d16ded23-45ce-483f-c87c-45fcf6857022"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Button(button_style='success', description='✔ Done', disabled=True, layout=Layout(min_width='50px'), style=But…"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"6ecfcc5b39384fe4981cf02260c31905"}},"metadata":{}}],"source":["#@markdown # Connect Google Drive\n","from google.colab import drive\n","from IPython.display import clear_output\n","import ipywidgets as widgets\n","import os\n","\n","def inf(msg, style, wdth): inf = widgets.Button(description=msg, disabled=True, button_style=style, layout=widgets.Layout(min_width=wdth));display(inf)\n","Shared_Drive = \"\" #@param {type:\"string\"}\n","#@markdown - Leave empty if you're not using a shared drive\n","\n","print(\"\u001b[0;33mConnecting...\")\n","drive.mount('/content/gdrive')\n","\n","if Shared_Drive!=\"\" and os.path.exists(\"/content/gdrive/Shareddrives\"):\n","  mainpth=\"Shareddrives/\"+Shared_Drive\n","else:\n","  mainpth=\"MyDrive\"\n","\n","clear_output()\n","inf('\\u2714 Done','success', '50px')"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"CFWtw-6EPrKi","colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["864dc67727be48968c47a1b32600113d","2d9861557f444c45ac49c2f2d0360280","f722314359fc47b8be670305899633d6"]},"executionInfo":{"status":"ok","timestamp":1688751324287,"user_tz":240,"elapsed":42946,"user":{"displayName":"Alejandro Vegas","userId":"05883108913568974019"}},"outputId":"7a696d41-d0ae-49b9-f849-06afe9a09d73"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Button(button_style='success', description='✔ Done', disabled=True, layout=Layout(min_width='50px'), style=But…"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"864dc67727be48968c47a1b32600113d"}},"metadata":{}}],"source":["#@markdown # Install/Update AUTOMATIC1111 repo\n","from IPython.utils import capture\n","from IPython.display import clear_output\n","from subprocess import getoutput\n","import ipywidgets as widgets\n","import sys\n","import fileinput\n","import os\n","import time\n","import base64\n","\n","blasphemy=base64.b64decode((\"d2VidWk=\").encode('ascii')).decode('ascii')\n","\n","if not os.path.exists(\"/content/gdrive\"):\n","  print('\u001b[1;31mGdrive not connected, using colab storage ...')\n","  time.sleep(4)\n","  mainpth=\"MyDrive\"\n","  !mkdir -p /content/gdrive/$mainpth\n","  Shared_Drive=\"\"\n","\n","if Shared_Drive!=\"\" and not os.path.exists(\"/content/gdrive/Shareddrives\"):\n","  print('\u001b[1;31mShared drive not detected, using default MyDrive')\n","  mainpth=\"MyDrive\"\n","\n","with capture.capture_output() as cap:\n","  def inf(msg, style, wdth): inf = widgets.Button(description=msg, disabled=True, button_style=style, layout=widgets.Layout(min_width=wdth));display(inf)\n","  fgitclone = \"git clone --depth 1\"\n","  %mkdir -p /content/gdrive/$mainpth/sd\n","  %cd /content/gdrive/$mainpth/sd\n","  !git clone -q --branch master https://github.com/AUTOMATIC1111/stable-diffusion-$blasphemy\n","  !mkdir -p /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/cache/\n","  os.environ['TRANSFORMERS_CACHE']=f\"/content/gdrive/{mainpth}/sd/stable-diffusion-\"+blasphemy+\"/cache\"\n","\n","with capture.capture_output() as cap:\n","  %cd /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/\n","  !git reset --hard\n","  !git checkout master\n","  time.sleep(1)\n","  !rm webui.sh\n","  !git pull\n","clear_output()\n","inf('\\u2714 Done','success', '50px')"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"ZGV_5H4xrOSp","colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["eae63258cc374a9faf50c33464305e93","1bb7b2e7468841aa9061915fb872e309","82191c35aa5444eca72ec392b38f11fc"]},"executionInfo":{"status":"ok","timestamp":1688751356718,"user_tz":240,"elapsed":32435,"user":{"displayName":"Alejandro Vegas","userId":"05883108913568974019"}},"outputId":"e609991d-cc74-4cdd-fbf2-7e2444bf028a"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Button(button_style='success', description='✔ Done', disabled=True, layout=Layout(min_width='50px'), style=But…"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"eae63258cc374a9faf50c33464305e93"}},"metadata":{}}],"source":["#@markdown # Requirements\n","\n","print('\u001b[1;32mInstalling requirements...')\n","\n","with capture.capture_output() as cap:\n","  %cd /content/\n","  !wget -q -i https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/Dependencies/A1111.txt\n","  !dpkg -i *.deb\n","  if not os.path.exists('/content/gdrive/'+mainpth+'/sd/stablediffusion'):\n","    !tar -C /content/gdrive/$mainpth --zstd -xf sd_rep.tar.zst\n","  !tar -C / --zstd -xf gcolabdeps.tar.zst\n","  !rm *.deb | rm *.zst | rm *.txt\n","  %env LD_PRELOAD=libtcmalloc.so\n","  os.environ['TF_CPP_MIN_LOG_LEVEL'] = '3'\n","  os.environ['PYTHONWARNINGS'] = 'ignore'\n","  !pip uninstall gradio -y\n","  !pip install gradio==3.32 -qq\n","clear_output()\n","inf('\\u2714 Done','success', '50px')"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"p4wj_txjP3TC","colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["098f4a7bdb1446f09bd4bd45c27de220","ced67e18e0b94918ad74fd6b06d79015","66ad1ac91fc84533aa8ca686995a5df8"]},"executionInfo":{"status":"ok","timestamp":1688751358931,"user_tz":240,"elapsed":2229,"user":{"displayName":"Alejandro Vegas","userId":"05883108913568974019"}},"outputId":"f06a4cb4-5549-403f-83ad-fa7b1c3d172e"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Button(button_style='success', description='✔ Using the trained model.', disabled=True, layout=Layout(min_widt…"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"098f4a7bdb1446f09bd4bd45c27de220"}},"metadata":{}}],"source":["#@markdown # Model Download/Load\n","Model_Version = \"V2.1-512px\" #@param [ \"1.5\", \"v1.5 Inpainting \", \"V2.1-512px\", \"V2.1-768px\"]\n","\n","Redownload_the_original_model = False #@param {type:\"boolean\"}\n","\n","def rmv():\n","  !wget -q -O /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/models/Stable-diffusion/model.ckpt https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/precompiled/README.md\n","  !mv /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/models/Stable-diffusion/model.ckpt /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/models/Stable-diffusion/trashfile.f\n","  time.sleep(2)\n","  !rm /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/models/Stable-diffusion/trashfile.f\n","  clear_output()\n","\n","if Redownload_the_original_model:\n","  with capture.capture_output() as cap:\n","    rmv()\n","\n","#@markdown Or\n","Path_to_MODEL = \"/content/gdrive/Shareddrives/Statknows team/01. Clientes/Daphne/Entrenamiento/Modelo\" #@param {type:\"string\"}\n","#@markdown - Insert the full path of your trained model or to a folder containing multiple models\n","\n","#@markdown Or\n","MODEL_LINK = \"\" #@param {type:\"string\"}\n","safetensors = False #@param {type:\"boolean\"}\n","Use_temp_storage = False #@param {type:\"boolean\"}\n","\n","\n","\n","def newmdl():\n","\n","    if not os.path.exists('/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'):\n","      %cd /content/\n","      clear_output()\n","      !git init\n","      !git lfs install --system --skip-repo\n","      !$fgitclone --branch fp16 \"https://huggingface.co/runwayml/stable-diffusion-v1-5\"\n","      if os.path.exists('/content/stable-diffusion-v1-5/unet/diffusion_pytorch_model.bin'):\n","        !wget -q -O stable-diffusion-v1-5/vae/diffusion_pytorch_model.bin https://huggingface.co/stabilityai/sd-vae-ft-mse/resolve/main/diffusion_pytorch_model.bin\n","        !wget -q -O convertosd.py https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dreambooth/convertosd.py\n","        !sed -i '201s@.*@    model_path = \"/content/stable-diffusion-v1-5\"@' /content/convertosd.py\n","        !sed -i '202s@.*@    checkpoint_path= \"/content/gdrive/{mainpth}/sd/stable-diffusion-{blasphemy}/models/Stable-diffusion/model.ckpt\"@' /content/convertosd.py\n","        clear_output()\n","        !python /content/convertosd.py\n","        !rm /content/convertosd.py\n","        if os.path.exists('/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'):\n","          model='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'\n","          clear_output()\n","          inf('\\u2714 Done','success', '50px')\n","        else:\n","          inf('\\u2718 Something went wrong, try again','danger', \"250px\")\n","      else:\n","        inf('\\u2718 Something went wrong','danger', \"200px\")\n","\n","    else:\n","      model='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'\n","      clear_output()\n","      inf('\\u2714 Model already exists, check the box \"Redownload_the_original_model\" to redownload/download the V1.5','primary', '700px')\n","\n","    if os.path.exists('/content/.git'):\n","      !rm -r /content/.git\n","\n","    if os.path.exists('/content/stable-diffusion-v1-5'):\n","      !rm -r /content/stable-diffusion-v1-5\n","\n","    return model\n","\n","def V2():\n","\n","    if not os.path.exists('/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'):\n","      %cd /content/\n","      clear_output()\n","      !mkdir \"/content/stable-diffusion-V2\"\n","      %cd \"/content/stable-diffusion-V2\"\n","      !git init\n","      !git lfs install --system --skip-repo\n","      if Model_Version == \"V2.1-768px\":\n","        !git remote add -f origin  \"https://huggingface.co/stabilityai/stable-diffusion-2-1\"\n","      elif Model_Version == \"V2.1-512px\":\n","        !git remote add -f origin  \"https://huggingface.co/stabilityai/stable-diffusion-2-1-base\"\n","      !git config core.sparsecheckout true\n","      !echo -e \"scheduler\\ntext_encoder\\ntokenizer\\nunet\\nvae\\nfeature_extractor\\nmodel_index.json\\n!*.safetensors\" > .git/info/sparse-checkout\n","      !git pull origin fp16\n","      %cd /content\n","      !wget -O convertosdv2.py https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dreambooth/convertosdv2.py\n","      clear_output()\n","      !python /content/convertosdv2.py --fp16 /content/stable-diffusion-V2 /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/models/Stable-diffusion/model.ckpt\n","      !rm /content/convertosdv2.py\n","      if os.path.exists('/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'):\n","        model='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'\n","        clear_output()\n","        inf('\\u2714 Done','success', '50px')\n","      else:\n","        inf('\\u2718 Something went wrong, try again','danger', \"250px\")\n","\n","    else:\n","      model='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/model.ckpt'\n","      clear_output()\n","      inf('\\u2714 Model already exists, check the box \"Redownload_the_original_model\" to redownload/download the V2','primary', '700px')\n","\n","    if os.path.exists('/content/.git'):\n","      !rm -r /content/.git\n","      !rm -r /content/convertosdv2.py\n","    if os.path.exists('/content/stable-diffusion-V2'):\n","      !rm -r /content/stable-diffusion-V2\n","\n","    return model\n","\n","def inpmdl():\n","\n","    if not os.path.exists('/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/sd-v1-5-inpainting.ckpt'):\n","      %cd /content/\n","      clear_output()\n","      !git init\n","      !git lfs install --system --skip-repo\n","      !$fgitclone --branch fp16 \"https://huggingface.co/runwayml/stable-diffusion-inpainting\"\n","      if os.path.exists('/content/stable-diffusion-inpainting'):\n","        !$fgitclone \"https://huggingface.co/stabilityai/sd-vae-ft-mse\"\n","        !rm -r /content/stable-diffusion-inpainting/vae\n","        !mv /content/sd-vae-ft-mse /content/stable-diffusion-inpainting/vae\n","        !wget -O convertosd.py https://github.com/TheLastBen/fast-stable-diffusion/raw/main/Dreambooth/convertosd.py\n","        !sed -i '201s@.*@    model_path = \"/content/stable-diffusion-inpainting\"@' /content/convertosd.py\n","        !sed -i '202s@.*@    checkpoint_path= \"/content/gdrive/{mainpth}/sd/stable-diffusion-{blasphemy}/models/Stable-diffusion/sd-v1-5-inpainting.ckpt\"@' /content/convertosd.py\n","        clear_output()\n","        !python /content/convertosd.py\n","        !rm /content/convertosd.py\n","        if os.path.exists('/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/sd-v1-5-inpainting.ckpt'):\n","          model='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/sd-v1-5-inpainting.ckpt'\n","          clear_output()\n","          inf('\\u2714 Done','success', '50px')\n","        else:\n","          inf('\\u2718 Something went wrong, try again','danger', \"250px\")\n","      else:\n","        inf('\\u2718 Something went wrong','danger', \"200px\")\n","\n","\n","    else:\n","      model='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion/sd-v1-5-inpainting.ckpt'\n","      clear_output()\n","      inf('\\u2714 inpainting model already exists','primary', '250px')\n","\n","    if os.path.exists('/content/.git'):\n","      !rm -r /content/.git\n","\n","    if os.path.exists('/content/stable-diffusion-inpainting'):\n","      !rm -r /content/stable-diffusion-inpainting\n","\n","    return model\n","\n","if (Path_to_MODEL !=''):\n","  if os.path.exists(str(Path_to_MODEL)):\n","    inf('\\u2714 Using the trained model.','success', '200px')\n","\n","  else:\n","      while not os.path.exists(str(Path_to_MODEL)):\n","        inf('\\u2718 Wrong path, use the colab file explorer to copy the path : ','danger', \"400px\")\n","        Path_to_MODEL=input()\n","      if os.path.exists(str(Path_to_MODEL)):\n","        inf('\\u2714 Using the trained model.','success', '200px')\n","\n","  model=Path_to_MODEL\n","\n","elif MODEL_LINK != \"\":\n","  gdrv='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/models/Stable-diffusion'\n","  tmp=\"/content\"\n","  pth=tmp if Use_temp_storage else gdrv\n","  %cd $pth\n","  clear_output()\n","  if not safetensors:\n","    modelname=\"model.ckpt\"\n","  else:\n","    modelname=\"model.safetensors\"\n","  !gdown --fuzzy -O $modelname \"$MODEL_LINK\"\n","  if os.path.exists(f'{pth}/{modelname}') and os.path.getsize(f'{pth}/{modelname}') > 1810671599:\n","      model=f'{pth}/{modelname}'\n","      clear_output()\n","      inf('\\u2714 Model downloaded, using the trained model.','success', '350px')\n","  else:\n","    if Use_temp_storage:\n","      !rm $pth/$modelname\n","    else:\n","      rmv()\n","    inf('\\u2718 Wrong link, check that the link is valid','danger', \"300px\")\n","\n","\n","elif Model_Version==\"1.5\":\n","  model=newmdl()\n","\n","elif Model_Version==\"V2.1-512px\" or Model_Version==\"V2.1-768px\":\n","  model=V2()\n","\n","else:\n","   model=inpmdl()"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"zC3Rz1b2TBcB","colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["6a1efbaa4cc74d9c81bda1da6f4b44d6","1f76bf6b6ee845d19fb6020f715894c1","c0c1ff2b50ca4e6183967cafd2fafebe"]},"executionInfo":{"status":"ok","timestamp":1688751432518,"user_tz":240,"elapsed":73590,"user":{"displayName":"Alejandro Vegas","userId":"05883108913568974019"}},"outputId":"e6b89d2d-1f9f-49f1-d857-44ade3118460"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Button(button_style='success', description='✔ Done', disabled=True, layout=Layout(min_width='50px'), style=But…"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"6a1efbaa4cc74d9c81bda1da6f4b44d6"}},"metadata":{}}],"source":["#@markdown # ControlNet\n","from torch.hub import download_url_to_file\n","from urllib.parse import urlparse\n","import re\n","from subprocess import run\n","\n","Model = \"All (21GB)\" #@param [ \"None\", \"All (21GB)\", \"Canny\", \"Depth\", \"Lineart\", \"MLSD\", \"Normal\", \"OpenPose\", \"Scribble\", \"Seg\", \"ip2p\", \"Shuffle\", \"Inpaint\", \"Softedge\", \"Lineart_Anime\", \"Tile\", \"T2iadapter_Models\"]\n","\n","v2_Model = \"All\" #@param [ \"None\", \"All\", \"Canny\", \"Depth\", \"HED\", \"OpenPose\", \"Scribble\"]\n","\n","#@markdown - Download/update ControlNet extension and its models\n","\n","def download(url, model_dir):\n","\n","    filename = os.path.basename(urlparse(url).path)\n","    pth = os.path.abspath(os.path.join(model_dir, filename))\n","    if not os.path.exists(pth):\n","        print('Downloading: '+os.path.basename(url))\n","        download_url_to_file(url, pth, hash_prefix=None, progress=True)\n","    else:\n","      print(f\"\u001b[1;32mThe model {filename} already exists\u001b[0m\")\n","\n","Canny='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_canny.pth'\n","Depth='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11f1p_sd15_depth.pth'\n","Lineart='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_lineart.pth'\n","MLSD='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_mlsd.pth'\n","Normal='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_normalbae.pth'\n","OpenPose='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_openpose.pth'\n","Scribble='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_scribble.pth'\n","Seg='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_seg.pth'\n","ip2p='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11e_sd15_ip2p.pth'\n","Shuffle='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11e_sd15_shuffle.pth'\n","Inpaint='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_inpaint.pth'\n","Softedge='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15_softedge.pth'\n","Lineart_Anime='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11p_sd15s2_lineart_anime.pth'\n","Tile='https://huggingface.co/lllyasviel/ControlNet-v1-1/resolve/main/control_v11f1e_sd15_tile.pth'\n","\n","with capture.capture_output() as cap:\n","  %cd /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/extensions\n","  if not os.path.exists(\"sd-webui-controlnet\"):\n","    !git clone https://github.com/Mikubill/sd-$blasphemy-controlnet.git\n","    %cd /content\n","  else:\n","    %cd sd-webui-controlnet\n","    !git reset --hard\n","    !git pull\n","    %cd /content\n","\n","mdldir='/content/gdrive/'+mainpth+'/sd/stable-diffusion-'+blasphemy+'/extensions/sd-webui-controlnet/models'\n","for filename in os.listdir(mdldir):\n","  if \"_sd14v1\" in filename:\n","    renamed = re.sub(\"_sd14v1\", \"-fp16\", filename)\n","    os.rename(os.path.join(mdldir, filename), os.path.join(mdldir, renamed))\n","\n","!wget -q -O CN_models.txt https://github.com/TheLastBen/fast-stable-diffusion/raw/main/AUTOMATIC1111_files/CN_models.txt\n","!wget -q -O CN_models_v2.txt https://github.com/TheLastBen/fast-stable-diffusion/raw/main/AUTOMATIC1111_files/CN_models_v2.txt\n","\n","with open(\"CN_models.txt\", 'r') as f:\n","  mdllnk = f.read().splitlines()\n","with open(\"CN_models_v2.txt\", 'r') as d:\n","  mdllnk_v2 = d.read().splitlines()\n","\n","!rm CN_models.txt CN_models_v2.txt\n","\n","with capture.capture_output() as cap:\n","  cfgnames=[os.path.basename(url).split('.')[0]+'.yaml' for url in mdllnk_v2]\n","  %cd /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/extensions/sd-webui-controlnet/models\n","  for name in cfgnames:\n","      run(['cp', 'cldm_v21.yaml', name])\n","  %cd /content\n","\n","if Model == \"All (21GB)\":\n","  for lnk in mdllnk:\n","      download(lnk, mdldir)\n","  clear_output()\n","\n","elif Model == \"T2iadapter_Models\":\n","  mdllnk=list(filter(lambda x: 't2i' in x, mdllnk))\n","  for lnk in mdllnk:\n","      download(lnk, mdldir)\n","  clear_output()\n","\n","elif Model == \"None\":\n","    pass\n","    clear_output()\n","\n","else:\n","  download(globals()[Model], mdldir)\n","  clear_output()\n","\n","Canny='https://huggingface.co/thibaud/controlnet-sd21/resolve/main/control_v11p_sd21_canny.safetensors'\n","Depth='https://huggingface.co/thibaud/controlnet-sd21/resolve/main/control_v11p_sd21_depth.safetensors'\n","HED='https://huggingface.co/thibaud/controlnet-sd21/resolve/main/control_v11p_sd21_hed.safetensors'\n","OpenPose='https://huggingface.co/thibaud/controlnet-sd21/resolve/main/control_v11p_sd21_openposev2.safetensors'\n","Scribble='https://huggingface.co/thibaud/controlnet-sd21/resolve/main/control_v11p_sd21_scribble.safetensors'\n","\n","if v2_Model == \"All\":\n","  for lnk_v2 in mdllnk_v2:\n","      download(lnk_v2, mdldir)\n","  clear_output()\n","  inf('\\u2714 Done','success', '50px')\n","\n","elif v2_Model == \"None\":\n","    pass\n","    clear_output()\n","    inf('\\u2714 Done','success', '50px')\n","\n","else:\n","  download(globals()[v2_Model], mdldir)\n","  clear_output()\n","  inf('\\u2714 Done','success', '50px')"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"PjzwxTkPSPHf","colab":{"base_uri":"https://localhost:8080/"},"outputId":"883bd02f-5e8a-44e9-aac4-eb897349dd43"},"outputs":[{"output_type":"stream","name":"stdout","text":["2023-07-07 17:39:42,524 - ControlNet - \u001b[0;32mINFO\u001b[0m - ControlNet v1.1.231\n","ControlNet preprocessor location: /content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/sd-webui-controlnet/annotator/downloads\n","2023-07-07 17:39:54,366 - ControlNet - \u001b[0;32mINFO\u001b[0m - ControlNet v1.1.231\n","Loading weights [b3665fa25f] from /content/gdrive/Shareddrives/Statknows team/01. Clientes/Daphne/Entrenamiento/Modelo/Definitivos/0.4(V3_PinturasModelo) + 0.6(V7_VidaLocaV7 (W1800) (Zoom2)).ckpt\n","preload_extensions_git_metadata for 8 extensions took 0.17s\n","Running on public URL: https://9e5af324b6d9bcad51.gradio.live\n","\u001b[32m✔ Connected\n","Startup time: 155.6s (import torch: 10.5s, import gradio: 1.2s, import ldm: 1.6s, other imports: 34.5s, setup codeformer: 8.4s, list SD models: 59.4s, load scripts: 25.9s, load upscalers: 0.5s, initialize extra networks: 7.5s, create ui: 1.7s, gradio launch: 3.5s, add APIs: 0.8s).\n","Creating model from config: /content/gdrive/MyDrive/sd/stable-diffusion-webui/configs/v1-inference.yaml\n","LatentDiffusion: Running in eps-prediction mode\n","DiffusionWrapper has 859.52 M params.\n","Applying attention optimization: sdp... done.\n","Textual inversion embeddings loaded(0): \n","Model loaded in 104.1s (load weights from disk: 91.4s, create model: 5.6s, apply weights to model: 2.6s, apply half(): 2.5s, move model to device: 1.6s, calculate empty prompt: 0.3s).\n","Calculating sha256 for /content/gdrive/Shareddrives/Statknows team/01. Clientes/Daphne/Entrenamiento/Modelo/Definitivos/0.75(V6_MadonnaTestV6 (3)) + 0.25(V2_V3_PinturasModelo).ckpt: 82aed35c87f8d9ef7723e6ea864c0c98e62763b53a90fa0a5e3369e9d60e28cd\n","Loading weights [82aed35c87] from /content/gdrive/Shareddrives/Statknows team/01. Clientes/Daphne/Entrenamiento/Modelo/Definitivos/0.75(V6_MadonnaTestV6 (3)) + 0.25(V2_V3_PinturasModelo).ckpt\n","Applying attention optimization: sdp... done.\n","Weights loaded in 101.8s (calculate hash: 73.7s, load weights from disk: 24.3s, apply weights to model: 2.5s, move model to device: 1.3s).\n","100% 46/46 [00:26<00:00,  1.74it/s]\n","100% 49/49 [00:24<00:00,  2.01it/s]\n","100% 43/43 [00:23<00:00,  1.86it/s]\n","2023-07-07 18:26:15,649 - ControlNet - \u001b[0;32mINFO\u001b[0m - Loading model: control_v11p_sd15_lineart [43d4be0d]\n","2023-07-07 18:26:33,290 - ControlNet - \u001b[0;32mINFO\u001b[0m - Loaded state_dict from [/content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/sd-webui-controlnet/models/control_v11p_sd15_lineart.pth]\n","2023-07-07 18:26:33,295 - ControlNet - \u001b[0;32mINFO\u001b[0m - Loading config: /content/gdrive/MyDrive/sd/stable-diffusion-webui/extensions/sd-webui-controlnet/models/control_v11p_sd15_lineart.yaml\n","2023-07-07 18:26:38,515 - ControlNet - \u001b[0;32mINFO\u001b[0m - ControlNet model control_v11p_sd15_lineart [43d4be0d] loaded.\n","2023-07-07 18:26:38,821 - ControlNet - \u001b[0;32mINFO\u001b[0m - Loading preprocessor: lineart_standard\n","2023-07-07 18:26:38,822 - ControlNet - \u001b[0;32mINFO\u001b[0m - preprocessor resolution = 512\n","100% 43/43 [00:33<00:00,  1.29it/s]\n","2023-07-07 18:27:55,696 - ControlNet - \u001b[0;32mINFO\u001b[0m - Loading model from cache: control_v11p_sd15_lineart [43d4be0d]\n","2023-07-07 18:27:55,698 - ControlNet - \u001b[0;32mINFO\u001b[0m - Loading preprocessor: lineart_standard\n","2023-07-07 18:27:55,698 - ControlNet - \u001b[0;32mINFO\u001b[0m - preprocessor resolution = 512\n","100% 43/43 [00:32<00:00,  1.33it/s]\n"]}],"source":["#@markdown # Start Stable-Diffusion\n","from IPython.utils import capture\n","import time\n","import sys\n","import fileinput\n","from pyngrok import ngrok, conf\n","\n","Use_Cloudflare_Tunnel = False #@param {type:\"boolean\"}\n","#@markdown - Offers better gradio responsivity\n","\n","Ngrok_token = \"\" #@param {type:\"string\"}\n","\n","#@markdown - Input your ngrok token if you want to use ngrok server\n","\n","User = \"\" #@param {type:\"string\"}\n","Password= \"\" #@param {type:\"string\"}\n","#@markdown - Add credentials to your Gradio interface (optional)\n","\n","auth=f\"--gradio-auth {User}:{Password}\"\n","if User ==\"\" or Password==\"\":\n","  auth=\"\"\n","\n","\n","with capture.capture_output() as cap:\n","  %cd /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/modules/\n","  !wget -q -O paths.py https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/AUTOMATIC1111_files/paths.py\n","  !wget -q -O extras.py https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-$blasphemy/master/modules/extras.py\n","  !wget -q -O sd_models.py https://raw.githubusercontent.com/AUTOMATIC1111/stable-diffusion-$blasphemy/master/modules/sd_models.py\n","  !wget -q -O /usr/local/lib/python3.10/dist-packages/gradio/blocks.py https://raw.githubusercontent.com/TheLastBen/fast-stable-diffusion/main/AUTOMATIC1111_files/blocks.py\n","  %cd /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/\n","\n","  !sed -i \"s@os.path.splitext(checkpoint_file)@os.path.splitext(checkpoint_file); map_location='cuda'@\" /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/modules/sd_models.py\n","  !sed -i 's@ui.create_ui().*@ui.create_ui();shared.demo.queue(concurrency_count=999999,status_update_rate=0.1)@' /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/webui.py\n","  !sed -i \"s@map_location='cpu'@map_location='cuda'@\" /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/modules/extras.py\n","  !sed -i 's@/content/gdrive/MyDrive/sd/stablediffusion@/content/gdrive/{mainpth}/sd/stablediffusion@' /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/modules/paths.py\n","  !sed -i 's@print(\\\"No module.*@@' /content/gdrive/$mainpth/sd/stablediffusion/ldm/modules/diffusionmodules/model.py\n","  !sed -i 's@\\[\"sd_model_checkpoint\"\\]@\\[\"sd_model_checkpoint\", \"sd_vae\", \"CLIP_stop_at_last_layers\", \"inpainting_mask_weight\", \"initial_noise_multiplier\"\\]@g' /content/gdrive/MyDrive/sd/$blasphemy/modules/shared.py\n","\n","share=''\n","if Ngrok_token!=\"\":\n","  ngrok.kill()\n","  srv=ngrok.connect(7860, pyngrok_config=conf.PyngrokConfig(auth_token=Ngrok_token) , bind_tls=True).public_url\n","\n","  for line in fileinput.input('/usr/local/lib/python3.10/dist-packages/gradio/blocks.py', inplace=True):\n","    if line.strip().startswith('self.server_name ='):\n","        line = f'            self.server_name = \"{srv[8:]}\"\\n'\n","    if line.strip().startswith('self.protocol = \"https\"'):\n","        line = '            self.protocol = \"https\"\\n'\n","    if line.strip().startswith('if self.local_url.startswith(\"https\") or self.is_colab'):\n","        line = ''\n","    if line.strip().startswith('else \"http\"'):\n","        line = ''\n","    sys.stdout.write(line)\n","\n","elif Use_Cloudflare_Tunnel:\n","  with capture.capture_output() as cap:\n","    !pkill cloudflared\n","    time.sleep(4)\n","    !nohup cloudflared tunnel --url http://localhost:7860 > /content/srv.txt 2>&1 &\n","    time.sleep(4)\n","    !grep -o 'https[^[:space:]]*\\.trycloudflare.com' /content/srv.txt >/content/srvr.txt\n","    time.sleep(2)\n","    srv= getoutput('cat /content/srvr.txt')\n","\n","    for line in fileinput.input('/usr/local/lib/python3.10/dist-packages/gradio/blocks.py', inplace=True):\n","      if line.strip().startswith('self.server_name ='):\n","          line = f'            self.server_name = \"{srv[8:]}\"\\n'\n","      if line.strip().startswith('self.protocol = \"https\"'):\n","          line = '            self.protocol = \"https\"\\n'\n","      if line.strip().startswith('if self.local_url.startswith(\"https\") or self.is_colab'):\n","          line = ''\n","      if line.strip().startswith('else \"http\"'):\n","          line = ''\n","      sys.stdout.write(line)\n","\n","    !rm /content/srv.txt /content/srvr.txt\n","\n","else:\n","  share='--share'\n","\n","try:\n","  model\n","  if os.path.isfile(model):\n","    !python /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/webui.py $share --api --disable-safe-unpickle --enable-insecure-extension-access --no-download-sd-model --no-half-vae  --ckpt \"$model\" --opt-sdp-attention $auth --disable-console-progressbars\n","  else:\n","    !python /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/webui.py $share --api --disable-safe-unpickle --enable-insecure-extension-access --no-download-sd-model --no-half-vae  --ckpt-dir \"$model\" --opt-sdp-attention $auth --disable-console-progressbars\n","except:\n","   !python /content/gdrive/$mainpth/sd/stable-diffusion-$blasphemy/webui.py $share --api --disable-safe-unpickle --enable-insecure-extension-access --no-download-sd-model --no-half-vae --opt-sdp-attention $auth --disable-console-progressbars"]}],"metadata":{"accelerator":"GPU","colab":{"provenance":[{"file_id":"1_jUL6YXe27U13J2bxTKAnopC-rO5dlr2","timestamp":1689029364010},{"file_id":"https://github.com/TheLastBen/fast-stable-diffusion/blob/main/fast_stable_diffusion_AUTOMATIC1111.ipynb","timestamp":1687873261906}]},"gpuClass":"standard","kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"},"widgets":{"application/vnd.jupyter.widget-state+json":{"6ecfcc5b39384fe4981cf02260c31905":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ButtonView","button_style":"success","description":"✔ Done","disabled":true,"icon":"","layout":"IPY_MODEL_41ab5615cc134f849d5dc8b42f582826","style":"IPY_MODEL_a501008153354d5fa28807d7efba3433","tooltip":""}},"41ab5615cc134f849d5dc8b42f582826":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":"50px","object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"a501008153354d5fa28807d7efba3433":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","button_color":null,"font_weight":""}},"864dc67727be48968c47a1b32600113d":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ButtonView","button_style":"success","description":"✔ Done","disabled":true,"icon":"","layout":"IPY_MODEL_2d9861557f444c45ac49c2f2d0360280","style":"IPY_MODEL_f722314359fc47b8be670305899633d6","tooltip":""}},"2d9861557f444c45ac49c2f2d0360280":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":"50px","object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"f722314359fc47b8be670305899633d6":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","button_color":null,"font_weight":""}},"eae63258cc374a9faf50c33464305e93":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ButtonView","button_style":"success","description":"✔ Done","disabled":true,"icon":"","layout":"IPY_MODEL_1bb7b2e7468841aa9061915fb872e309","style":"IPY_MODEL_82191c35aa5444eca72ec392b38f11fc","tooltip":""}},"1bb7b2e7468841aa9061915fb872e309":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":"50px","object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"82191c35aa5444eca72ec392b38f11fc":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","button_color":null,"font_weight":""}},"098f4a7bdb1446f09bd4bd45c27de220":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ButtonView","button_style":"success","description":"✔ Using the trained model.","disabled":true,"icon":"","layout":"IPY_MODEL_ced67e18e0b94918ad74fd6b06d79015","style":"IPY_MODEL_66ad1ac91fc84533aa8ca686995a5df8","tooltip":""}},"ced67e18e0b94918ad74fd6b06d79015":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":"200px","object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"66ad1ac91fc84533aa8ca686995a5df8":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","button_color":null,"font_weight":""}},"6a1efbaa4cc74d9c81bda1da6f4b44d6":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ButtonView","button_style":"success","description":"✔ Done","disabled":true,"icon":"","layout":"IPY_MODEL_1f76bf6b6ee845d19fb6020f715894c1","style":"IPY_MODEL_c0c1ff2b50ca4e6183967cafd2fafebe","tooltip":""}},"1f76bf6b6ee845d19fb6020f715894c1":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":"50px","object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"c0c1ff2b50ca4e6183967cafd2fafebe":{"model_module":"@jupyter-widgets/controls","model_name":"ButtonStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ButtonStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","button_color":null,"font_weight":""}}}}},"nbformat":4,"nbformat_minor":0}